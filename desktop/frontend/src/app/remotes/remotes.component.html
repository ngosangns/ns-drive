<!-- Remotes List -->
<div class="flex flex-col h-full">
  <!-- Header -->
  <p-toolbar>
    <ng-template #start>
      <div class="flex items-center gap-3">
        <i class="pi pi-cloud text-primary-400 text-xl"></i>
        <h1 class="text-lg font-semibold text-gray-100">Connected Remotes</h1>
        <span class="text-sm text-gray-500">
          {{ (appService.remotes$ | async)?.length || 0 }} remote(s)
        </span>
      </div>
    </ng-template>
    <ng-template #end>
      <p-button
        label="Add Remote"
        icon="pi pi-plus"
        (onClick)="openAddRemoteDialog()"
        size="small"
      ></p-button>
    </ng-template>
  </p-toolbar>

  <!-- Scrollable Content -->
  <div class="flex-1 overflow-auto">
    <div class="max-w-4xl mx-auto">
      @if ((appService.remotes$ | async)?.length) {
      <div class="p-4">
        <div class="space-y-3" role="list" aria-label="Connected remotes list">
          @for (remote of appService.remotes$ | async; track remote) {
          <p-card [attr.aria-label]="'Remote: ' + remote.name" styleClass="group hover:bg-gray-700 transition-colors duration-200">
            <div class="flex items-center">
              <div class="flex-shrink-0 mr-4">
                <i class="pi pi-cloud text-3xl text-gray-400" aria-hidden="true"></i>
              </div>
              <div class="flex-1 min-w-0">
                <h3 class="text-lg font-medium text-gray-100 truncate">
                  {{ remote.name }}
                </h3>
                <p class="text-sm text-gray-400 mt-1">
                  {{ getRemoteTypeLabel(remote.type) }}
                </p>
              </div>
              <div class="flex-shrink-0 ml-4">
                <p-button
                  icon="pi pi-trash"
                  [rounded]="true"
                  [text]="true"
                  severity="danger"
                  (onClick)="confirmDeleteRemote(remote)"
                  [attr.aria-label]="'Delete remote ' + remote.name"
                  styleClass="opacity-0 group-hover:opacity-100 focus:opacity-100"
                ></p-button>
              </div>
            </div>
          </p-card>
          }
        </div>
      </div>
      } @else {
      <div class="flex flex-col items-center justify-center flex-1 py-16 text-gray-500">
        <div class="w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mb-4">
          <div class="relative">
            <i class="pi pi-cloud text-3xl text-gray-400"></i>
            <i class="pi pi-times text-sm text-gray-400 absolute -top-1 -right-1"></i>
          </div>
        </div>
        <h2 class="text-xl font-bold text-gray-100 mb-2">
          No Remotes Configured
        </h2>
        <p class="text-gray-400 mb-6">
          Add your first cloud storage connection
        </p>
        <p-button
          label="Add First Remote"
          icon="pi pi-plus"
          (onClick)="openAddRemoteDialog()"
        ></p-button>
      </div>
      }
    </div>
  </div>
</div>

<!-- Add Remote Dialog (PrimeNG) -->
<p-dialog
  header="Add New Remote"
  [(visible)]="showAddRemoteModal"
  [modal]="true"
  [style]="{ width: '24rem' }"
  [closable]="true"
  (onHide)="closeAddRemoteModal()"
>
  <form (ngSubmit)="saveRemote()" class="space-y-4">
    <div>
      <label
        for="remote-name-input"
        class="block text-sm font-medium text-gray-300 mb-2"
      >
        Remote Name
      </label>
      <input
        id="remote-name-input"
        type="text"
        pInputText
        [(ngModel)]="addRemoteData.name"
        name="name"
        placeholder="Enter remote name"
        required
        class="w-full"
      />
    </div>
    <div>
      <label
        for="remote-type-select"
        class="block text-sm font-medium text-gray-300 mb-2"
      >
        Remote Type
      </label>
      <p-select
        id="remote-type-select"
        [(ngModel)]="addRemoteData.type"
        name="type"
        [options]="remoteTypeOptions"
        optionLabel="label"
        optionValue="value"
        placeholder="Select a remote type"
        styleClass="w-full"
      ></p-select>
    </div>
    <div class="flex justify-end space-x-3 pt-4">
      <p-button
        type="button"
        label="Cancel"
        severity="secondary"
        (onClick)="closeAddRemoteModal()"
      ></p-button>
      <p-button
        type="submit"
        [label]="(isAddingRemote$ | async) ? 'Adding...' : 'Add Remote'"
        [disabled]="
          !addRemoteData.name ||
          !addRemoteData.type ||
          (isAddingRemote$ | async)
        "
        [loading]="!!(isAddingRemote$ | async)"
      ></p-button>
    </div>
  </form>
</p-dialog>
