<!-- Profiles List -->
<div class="flex flex-col h-full">
  <!-- Header -->
  <p-toolbar>
    <ng-template #start>
      <div class="flex items-center gap-3">
        <i class="pi pi-users text-primary-400"></i>
        <h1 class="text-lg font-semibold text-gray-100">Sync Profiles</h1>
        <span class="text-sm text-gray-500">
          {{ (appService.configInfo$ | async)?.profiles?.length || 0 }}
          profile(s)
        </span>
      </div>
    </ng-template>
    <ng-template #end>
      <p-button
        icon="pi pi-plus"
        label="Add Profile"
        size="small"
        (onClick)="addProfile()"
      ></p-button>
    </ng-template>
  </p-toolbar>

  <!-- Scrollable Content -->
  <div class="flex-1 overflow-auto p-4">
    <div class="max-w-4xl mx-auto">
      @if ((appService.configInfo$ | async)?.profiles?.length) {
        <div class="space-y-3" role="list" aria-label="Sync profiles list">
          @for ( profile of (appService.configInfo$ | async)?.profiles; track
          profile; let idx = $index) {
          <p-card
            styleClass="cursor-pointer hover:bg-gray-700 transition-colors duration-200"
            (click)="editProfile(idx)"
          >
            <div
              class="flex items-center group"
              [attr.aria-label]="'Edit profile ' + (profile.name || 'Untitled')"
            >
              <div class="flex-shrink-0 mr-4">
                <i
                  class="pi pi-folder-open text-3xl text-gray-400"
                  aria-hidden="true"
                ></i>
              </div>
              <div class="flex-1 min-w-0">
                <h3 class="text-lg font-medium text-gray-100 truncate">
                  {{ profile.name || "Untitled Profile" }}
                </h3>
                <p class="text-sm text-gray-400 mt-1">
                  {{ getProfileDescription(profile) }}
                </p>
              </div>
              <div class="flex-shrink-0 ml-4">
                <p-button
                  icon="pi pi-trash"
                  severity="danger"
                  [text]="true"
                  [rounded]="true"
                  styleClass="opacity-0 group-hover:opacity-100 focus:opacity-100"
                  (onClick)="removeProfile(idx); $event.stopPropagation()"
                  [attr.aria-label]="'Delete profile ' + (profile.name || 'Untitled')"
                ></p-button>
              </div>
            </div>
          </p-card>
          }
        </div>
      } @else {
      <div class="flex flex-col items-center justify-center flex-1 py-16 text-gray-500">
        <div class="w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mb-4">
          <div class="relative">
            <i class="pi pi-folder-open text-3xl text-gray-400"></i>
            <i class="pi pi-times text-sm text-gray-400 absolute -top-1 -right-1"></i>
          </div>
        </div>
        <h2 class="text-xl font-bold text-gray-100 mb-2">
          No Profiles Found
        </h2>
        <p class="text-gray-400 mb-6">
          Create your first sync profile to get started
        </p>
        <p-button
          icon="pi pi-plus"
          label="Create First Profile"
          (onClick)="addProfile()"
        ></p-button>
      </div>
      }
    </div>
  </div>
</div>
